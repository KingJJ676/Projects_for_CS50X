# MeetUP
#### Video Demo:  <https://youtu.be/Sd_SJ-MQAI4>

## What is MeetUP ?
MeetUP is a website that allows users to schedule their time for events.

The creater of the event first provide a range of possible time.
Then, a sharable link is generated for others to join and provide each of their available time. Lastly, a recommended time is shown, telling all users when would be the best time to hold the event.

## File explainations
### ```app.py``` & html pages
- **Basic setup**:

    Including configuration of ```Flask``` and ```Session```, setup to prevent cashing, and reading in ```SQL``` database.
- **```/``` & ```index.html```:**

    The homepage. ```session.clear()``` forgets any user information. And a button linking to ```createEvent.html``` is provided for users to start creating an event.

- **```/createEvent``` & ```createEvent.html```:**

    This page allows users to create an event by giving an event name and a possible time range of the event. It first checks for an event name, a start time and a end time. It then validates that the end time is after the start time.

    Next, it records the event name, start time, end time and an "event hash" into a table called ```events```. The "event hash" is a string of hash unique to each event and is used to identify between different events.

    Lastly, a sharable link of the event is generated. The link is generated by adding an eventID, which is generated by the event hash, to the end of the link. Thus, when other users click on the link, they will be redirected to the webpage for that specific event.

- **```/event/<eventID>``` & ```event.html```:**

    This page shows the event name and allows users to either register for a new account(to fill in their available time for the event) or log in (to see the result time of the event).

- **```/register/<eventID>``` & ```register.html```:**

    This page allows users to register for an account that is specific for the event. That is, the same account will not be usable for another event. The user will be required to register for an account for each event. The reason for this design is to avoid having users with the same username in the same event. When registering for a new account, the application will check if the username has already been used in that event and return an apology if so.

    Else, the username and password will be recorded into a table called ```members``` along with the eventID. Note that the password will only be stored with hashes for safety reason.


- **```/login/<eventID>``` & ```login.html```:**

    This page allows users to log in. It first check if the required inputs are given by the user. Then, it validates whether the username and password matches. Lastly, it logs user in as a *member* of the event and fetches data associated with that ```session[userID]```.

- **```/logout/<eventID>```:**

    This page logs user out. With ```session.clear()```, it forgets the user's ID and redirect the user to the index page.

- **```/schedule/<eventID>``` & ```schedule.html```:**

    This page allows a registered member of that event to fill in their available time. ```showTimeOptions()``` is called to show the available time selections.

    Members can click and drag over the time slot to select the time. The data is then recorded into a table called ```availability``` along with eventID and memberID (userID).

- **```/result/<eventID>``` & ```result.html```:**

    This page shows the recommended time of the event and the available and unavailable members for that time.

    First, all the available time from each member is sorted in descending order, according to how many members is also available. Next, the application checks if a *top choice* exists. That is, available members must be more than unavailable members. Thus, when there are only two members scheduling for the event, an apology of "no recommended time" will be returned. Reversely, the *top choice* will be displayed.

    Secondly, two SQL query are performed to show the available and unavailable members.

    Lastly, a simple calculation is used to show the ratio of available and unavailable members.

### ```helpers.py```

Three functions are defined in this file.

- **```apology()``` & ```apology.html```:**

    This function returns apology messages with a cat meme, thanks to [@jacebrowning's memegen](https://github.com/jacebrowning/memegen#special-characters).

- **```login_required()```:**

    This function requires users to log in in order to see the data, thanks to [@CS50](https://github.com/cs50).

- **```showTimeOptions()```:**

    A SQL qurery is first performed to select the possible start time and end time of the event. Then, the start time and end time are transformed into datetime object from str.

    Next, a loop is performed, adding one hour to the starting time until reaching the end time, while appending each hour to a list.

    Lastly, the datetime object in the list are transformed back into str in order to be displayed with html.

### ```meetUP.db```
This is a SQL database including three tables: events, members, and availability.

- **```events```:** Recording information of all the events created with this web application.
- **```members```:** Recording information of all the members registering in this web applicaiton.
- **```availability```:** Recording information of all the members' available time for each event.

### Others
- **```requirements.txt```:** Contains the required library to run this web application.
- **```styles.css```:** Defines the css style of some of the elements
- **```calendar.html```:** The calendar is seperated for easier use in different webpages.
- **```layout.html```:** Defines the general layout of the webpage and is extendable in other pages.